(this["webpackJsonpmovie-application-pgm-chardelv1"]=this["webpackJsonpmovie-application-pgm-chardelv1"]||[]).push([[0],{18:function(e,t,n){e.exports={movielistItem:"MovieDetails_movielistItem__20xeX",picture:"MovieDetails_picture__2qzFo",content:"MovieDetails_content__3w0v6",title:"MovieDetails_title__23HZG",meta:"MovieDetails_meta__2YlXr",rating:"MovieDetails_rating__2cD9w",textInfo:"MovieDetails_textInfo__3Obul"}},19:function(e,t,n){e.exports={movielistItem:"MovieListItem_movielistItem__j1eIN",picture:"MovieListItem_picture__oRERc",content:"MovieListItem_content___X2XO",title:"MovieListItem_title__yu4p6",meta:"MovieListItem_meta__3HBB9",rating:"MovieListItem_rating__TvMor"}},20:function(e,t,n){e.exports={showlistItem:"ShowListItem_showlistItem__3mT3W",picture:"ShowListItem_picture__2rEf2",content:"ShowListItem_content__1qtex",title:"ShowListItem_title__3bx0f",meta:"ShowListItem_meta__VWP6M",rating:"ShowListItem_rating__3qLxl"}},30:function(e,t,n){e.exports={fullContainer:"NotFoundPage_fullContainer__18JJP",fof:"NotFoundPage_fof__25q8d",callToActions:"NotFoundPage_callToActions__3QEDn"}},36:function(e,t){},39:function(e,t,n){},40:function(e,t,n){e.exports={footer:"Footer_footer__1VB1I"}},42:function(e,t,n){e.exports={user__avatar:"MainNavigation_user__avatar__1W7UX"}},43:function(e,t,n){e.exports={header:"Header_header__3bMw_"}},44:function(e,t,n){e.exports={main:"BaseLayout_main__1oaWc"}},45:function(e,t,n){e.exports={movieList:"MovieList_movieList__34BsK"}},46:function(e,t,n){e.exports={movielistItem:"MovieReviewListItem_movielistItem__OZfuE",picture:"MovieReviewListItem_picture__2YOow",content:"MovieReviewListItem_content__H4JgD",title:"MovieReviewListItem_title__3cPcP",meta:"MovieReviewListItem_meta__1_imf",rating:"MovieReviewListItem_rating__vDCyo"}},47:function(e,t,n){e.exports={showList:"ShowList_showList__1zr4D"}},52:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n.n(c),a=n(38),s=n.n(a),i=(n(52),n(6)),o=n.n(i),l=n(12),u=n(9),j=(n(54),n(29)),d=(n(36),{apiKey:"AIzaSyC5vUCj6jFwycA4szyOPEkyr9KjY9SmU3s",authDomain:"pgm-pgm4-movie-app.firebaseapp.com",databaseURL:"https://pgm-pgm4-movie-app-default-rtdb.europe-west1.firebasedatabase.app",projectId:"pgm-pgm4-movie-app",storageBucket:"pgm-pgm4-movie-app.appspot.com",messagingSenderId:"268222822149",appId:"1:268222822149:web:bbde0eaf717bd633e1296c"}),p=n(2),m=Object(c.createContext)(null),b=function(){return Object(c.useContext)(m)},h=function(e){var t=e.children,n=Object(c.useState)(j.a.apps.length?j.a.app():j.a.initializeApp(d)),r=Object(u.a)(n,1)[0];return Object(p.jsx)(m.Provider,{value:{app:r},children:t})},x=Object(c.createContext)(null),O=function(){return Object(c.useContext)(x)},v=function(e){var t=e.children,n=Object(c.useState)(JSON.parse(localStorage.getItem("react-firebase-pgm-4:currentUser"))),r=Object(u.a)(n,2),a=r[0],s=r[1],i=b().app.auth();Object(c.useEffect)((function(){var e=i.onAuthStateChanged((function(e){localStorage.setItem("react-firebase-pgm-4:currentUser",JSON.stringify(e)),s(e)}));return function(){e()}}),[i]);var j=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.signInWithEmailAndPassword(t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("react-firebase-pgm-4:currentUser",null),e.next=3,i.signOut();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(x.Provider,{value:{currentUser:a,signInWithEmailAndPassword:j,signOut:d},children:t})},f=n(11),_=n(7),g="/",w="/movies",N="/movies/:id",I="/tv-shows",L="tv-shows/:id",y="/auth/sigin",P=n(39),M=n.n(P),S=n(40),E=n.n(S),R=function(){return Object(p.jsx)("footer",{className:E.a.footer,children:Object(p.jsx)(f.b,{to:"/404",children:"404"})})},k=n(42),D=n.n(k),C=function(){var e=O(),t=e.currentUser,n=e.signOut;return Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(f.b,{to:g,children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(f.b,{to:w,children:"Movies"})}),Object(p.jsx)("li",{children:Object(p.jsx)(f.b,{to:I,children:"TV-Shows"})}),Object(p.jsx)("li",{children:t?Object(p.jsxs)("button",{href:"#",onClick:n,children:[Object(p.jsx)("img",{className:D.a.user__avatar,src:t.photoURL,alt:"User avatar"}),"Logout"]}):Object(p.jsx)(f.b,{to:y,children:"Sign In"})})]})})},A=n(43),B=n.n(A),F=function(){return Object(p.jsx)("header",{className:B.a.header,children:Object(p.jsx)(C,{})})},U=n(44),W=n.n(U),H=function(e){var t=e.children;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(F,{}),Object(p.jsx)("main",{className:W.a.main,children:t}),Object(p.jsx)(R,{})]})},T=function(){return Object(p.jsx)(H,{children:Object(p.jsx)("p",{children:"HOME PAGE"})})},V=(n(30),n(25)),J=n(24),z=function(e,t){t=t?"&".concat(t):"";var n=Object(c.useState)([]),r=Object(u.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(),j=Object(u.a)(i,2),d=j[0],p=j[1],m=Object(c.useState)(!0),b=Object(u.a)(m,2),h=b[0],x=b[1];console.log("77a730ff683e532669abfe709209746d");var O="https://api.themoviedb.org/3/".concat(e,"?api_key=").concat("77a730ff683e532669abfe709209746d").concat(t);console.log(O);var v=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O);case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,s(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),p(e.t0);case 13:return e.prev=13,x(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){v()}),[]),[a,h,d]},X=n(18),q=n.n(X),G=function(e){var t=e.id,n=z("/movie/".concat(t)),c=Object(u.a)(n,3),r=c[0],a=c[1],s=c[2],i=z("/movie/".concat(t,"/credits")),o=Object(u.a)(i,3),l=o[0],j=(o[1],o[2],[]);return l.crew&&(j=l.crew.filter((function(e){return"Writing"===e.known_for_department})).map((function(e){return{job:e.job,name:e.name}}))),console.log(j),Object(p.jsxs)(p.Fragment,{children:[r&&Object(p.jsxs)("article",{className:q.a.movielistItem,children:[Object(p.jsxs)("div",{className:q.a.visualInfo,children:[Object(p.jsx)("picture",{className:q.a.picture,children:Object(p.jsx)("img",{src:"https://www.themoviedb.org/t/p/w600_and_h900_bestv2/".concat(r.poster_path),alt:r.title})}),Object(p.jsxs)("div",{className:q.a.content,children:[Object(p.jsx)("span",{className:q.a.rating,children:r.vote_average}),Object(p.jsx)("h3",{className:q.a.title,children:r.title})]}),Object(p.jsxs)("footer",{className:q.a.meta,children:[Object(p.jsxs)("span",{className:q.a.numReviews,children:[Object(p.jsx)(J.a,{}),Object(p.jsx)("span",{children:r.vote_count})]}),Object(p.jsxs)("span",{className:q.a.numViews,children:[Object(p.jsx)(V.a,{}),Object(p.jsx)("span",{children:Math.floor(r.popularity)})]})]})]}),Object(p.jsxs)("div",{className:q.a.textInfo,children:[Object(p.jsx)("h1",{children:r.title}),Object(p.jsx)("h2",{children:r.tagline}),Object(p.jsxs)("a",{href:r.homepage,title:r.title,children:[r.title," homepage"]}),Object(p.jsx)("h2",{children:"Synopsis:"}),Object(p.jsx)("p",{children:r.overview}),Object(p.jsx)("p",{children:Object(p.jsx)("span",{})})]})]}),a&&Object(p.jsx)("p",{children:"Loading..."}),s&&Object(p.jsxs)("p",{children:["Error! ",s]})]})},K=n(21),Y=(n(63),n(65)),Z=r.a.createContext(null),Q=function(e){var t=e.children,n=b().app.firestore(),c=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.collection("projects").orderBy("createdAt","desc"),e.next=3,t.get();case 3:return c=e.sent,r=c.docs.map((function(e){return Object(K.a)({uid:e.id},e.data())})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c,r,a,s,i,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:10,c=l.length>1&&void 0!==l[1]?l[1]:null,r=null,r=null===c?n.collection("projects").orderBy("createdAt","desc").limit(t):n.collection("projects").orderBy("createdAt","desc").startAfter(c).limit(t),e.next=6,r.get();case 6:return a=e.sent,s=a.docs[a.docs.length-1],i=a.docs.map((function(e){return Object(K.a)({uid:e.id},e.data())})),e.abrupt("return",{projects:i,itemsPerPage:t,lastVisibleDoc:s});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(l.a)(o.a.mark((function e(t){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.collection("projects").doc(t),e.next=3,c.get();case 3:if((r=e.sent).exists){e.next=6;break}throw new Error("Document does not exist!");case 6:return e.abrupt("return",Object(K.a)({uid:r.id},r.data()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(o.a.mark((function e(t){var c,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.collection("projects").doc(t).collection("reviews").orderBy("createdAt","desc"),e.next=3,c.get();case 3:return r=e.sent,a=r.docs.map((function(e){return Object(K.a)({uid:e.id},e.data())})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(o.a.mark((function e(t,c){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.collection("reviews").doc(Object(Y.a)()),e.abrupt("return",n.runTransaction((function(e){return e.get(t).then((function(n){if(!n.exists)throw new Error("Document does not exist!");var a=n.data().numReviews+1,s=(n.data().avgRating*n.data().numReviews+c.rating)/a;e.update(t,{numReviews:a,avgRating:s}),e.set(r,c)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(p.jsx)(Z.Provider,{value:{addReview:i,getPagedProjects:r,getProjectById:a,getProjects:c,getProjectReviews:s},children:t})},$=n(19),ee=n.n($),te=function(e){var t=e.movie;return console.log(t),Object(p.jsxs)("article",{className:ee.a.movielistItem,children:[Object(p.jsx)("picture",{className:ee.a.picture,children:Object(p.jsx)("img",{src:"https://www.themoviedb.org/t/p/w600_and_h900_bestv2/".concat(t.poster_path),alt:t.title})}),Object(p.jsxs)("div",{className:ee.a.content,children:[Object(p.jsx)("span",{className:ee.a.rating,children:t.vote_average}),Object(p.jsx)("h3",{className:ee.a.title,children:Object(p.jsx)(f.b,{to:N.replace(":id",t.id),children:t.title})})]}),Object(p.jsxs)("footer",{className:ee.a.meta,children:[Object(p.jsxs)("span",{className:ee.a.numReviews,children:[Object(p.jsx)(J.a,{}),Object(p.jsx)("span",{children:t.vote_count})]}),Object(p.jsxs)("span",{className:ee.a.numViews,children:[Object(p.jsx)(V.a,{}),Object(p.jsx)("span",{children:Math.floor(t.popularity)})]})]})]})},ne=n(45),ce=n.n(ne),re=function(e){e.itemsPerPage;var t=z("discover/movie"),n=Object(u.a)(t,3),c=n[0],r=n[1],a=n[2],s=c.results;return console.log(c.results),Object(p.jsxs)("div",{className:ce.a.movieList,children:[r&&Object(p.jsx)("p",{children:"Loading..."}),!!s&&s.map((function(e){return Object(p.jsx)(te,{movie:e},e.id)})),!!s&&s.length<1&&Object(p.jsx)("p",{children:"No data."}),a&&Object(p.jsxs)("p",{children:["Error: ",a.message]})]})},ae=(n(46),function(){var e=Object(_.g)().id;return Object(p.jsx)(H,{children:Object(p.jsx)(G,{id:e})})}),se=function(){return Object(p.jsx)(H,{children:Object(p.jsx)(re,{})})},ie=function(){return Object(p.jsx)(H,{children:Object(p.jsx)("p",{children:"TV SHOW PAGE"})})},oe=n(20),le=n.n(oe),ue=function(e){var t=e.show;return Object(p.jsxs)("article",{className:le.a.showlistItem,children:[Object(p.jsx)("picture",{className:le.a.picture,children:Object(p.jsx)("img",{src:t.thumbnailURL,alt:t.title})}),Object(p.jsxs)("div",{className:le.a.content,children:[Object(p.jsx)("span",{className:le.a.rating,children:Math.round(t.avgRating/5*100)}),Object(p.jsx)("h3",{className:le.a.title,children:Object(p.jsx)(f.b,{to:L.replace(":id",t.uid),children:t.title})})]}),Object(p.jsxs)("footer",{className:le.a.meta,children:[Object(p.jsxs)("span",{className:le.a.numReviews,children:[Object(p.jsx)(J.a,{}),Object(p.jsx)("span",{children:t.numReviews})]}),Object(p.jsxs)("span",{className:le.a.numViews,children:[Object(p.jsx)(V.a,{}),Object(p.jsx)("span",{children:t.numViews})]})]})]})},je=n(47),de=n.n(je),pe=function(e){e.itemsPerPage;var t=z("discover/tv"),n=Object(u.a)(t,3),c=n[0],r=n[1],a=n[2],s=c.results;return console.log(s),Object(p.jsxs)("div",{className:de.a.showList,children:[r&&Object(p.jsx)("p",{children:"Loading..."}),!!s&&s.map((function(e){return Object(p.jsx)(ue,{show:e},e.id)})),!!s&&s.length<1&&Object(p.jsx)("p",{children:"No data."}),a&&Object(p.jsxs)("p",{children:["Error: ",a.message]})]})},me=function(){return Object(p.jsx)(H,{children:Object(p.jsx)(pe,{})})},be=n(28),he=function(e){e.children;var t=Object(_.f)(),n=Object(c.useState)({txtEmail:"",txtPassword:""}),r=Object(u.a)(n,2),a=r[0],s=r[1],i=O(),j=(i.currentUser,i.signInWithEmailAndPassword),d=(i.signOut,function(){var e=Object(l.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,j(a.txtEmail,a.txtPassword);case 3:e.sent,t.goBack();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(Object(K.a)(Object(K.a)({},a),{},Object(be.a)({},t.target.name,t.target.value)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"page page--sign-in",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-12 offset-md-2 col-md-8 offset-lg-3 col-lg-6",children:Object(p.jsxs)("form",{onSubmit:function(e){return d(e)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"txtEmail",children:"Email address"}),Object(p.jsx)("input",{type:"email",className:"form-control",id:"txtEmail",name:"txtEmail","aria-describedby":"emailHelp",onChange:m,value:a.txtEmail}),Object(p.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"txtPassword",children:"Password"}),Object(p.jsx)("input",{type:"password",className:"form-control",id:"txtPassword",name:"txtPassword",onChange:m,value:a.txtPassword})]}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Sign In"})]})})})})})};var xe=function(){return Object(p.jsx)("div",{className:M.a.app,children:Object(p.jsx)(h,{children:Object(p.jsx)(v,{children:Object(p.jsx)(Q,{children:Object(p.jsx)(f.a,{basename:"movie-application-pgm-chardelv1",children:Object(p.jsxs)(_.c,{children:[Object(p.jsx)(_.a,{exact:!0,path:g,component:T}),Object(p.jsx)(_.a,{from:"/home",to:g}),Object(p.jsx)(_.a,{exact:!0,path:N,component:ae}),Object(p.jsx)(_.a,{exact:!0,path:w,component:se}),Object(p.jsx)(_.a,{exact:!0,path:L,component:ie}),Object(p.jsx)(_.a,{exact:!0,path:I,component:me}),Object(p.jsx)(_.a,{exact:!0,path:y,component:he})]})})})})})})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(xe,{})}),document.getElementById("root")),Oe()}},[[62,1,2]]]);
//# sourceMappingURL=main.d91237c8.chunk.js.map